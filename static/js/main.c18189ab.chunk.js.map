{"version":3,"sources":["components/App/App.js","Config.js","components/Field/Field.js","utils/GenerateShip.js","utils/GenerateSafeArea.js","utils/AI.js","utils/InitialField.js","utils/CreateCopy.js","utils/ConfigureField.js","utils/CreateEmpty.js","utils/Point.js","components/Game/Game.js","components/Timer/Timer.js","components/Enter/Enter.js","index.js"],"names":["App","id","config","fieldSize","ships","battleship","size","amount","units","destroyed","cruiser","destroyer","boat","safeValue","timeAIIsWaiting","timerStart","Field","field","mode","playFor","handleClick","map","row","rowIndex","key","cell","index","value","className","idName","parseInt","Math","abs","getClassAndId","onClick","src","alt","locateShip","head","coords","directions","y","x","tryDirection","futureShip","offset","shipCells","iter","push","every","forEach","Point","randomDirection","_","random","length","splice","generateShip","empty","createListOfEmptyCells","point","generateSafeArea","renderedField","toString","safe","sides","rowOffset","cellOffset","String","AI","points","ship","startPoint","endPoint","choice","checkCanVisit","getMovedEndPoint","invert","diffRow","diffCell","console","log","searchEndPoint","tail","tailRow","tailCell","availableDirs","filter","dir","movedEndPoint","tryIndex","findIndex","tryDir","headRow","headCell","searchStartPoint","copy","newEndPoint","rowAI","cellAI","initialField","Array","fill","object","result","arr","Object","JSON","parse","stringify","configureField","val","flat","floor","this","setShips","newField","fromEntries","entries","params","times","checkShipDestroyed","destroyedShip","unit","Game","useState","changeMode","guessField","setGuess","AIField","setAIField","AIShips","setAIShips","playerField","setPlayerField","playerShips","setPlayerShips","AIMemory","memorize","AIIsThinking","think","status","person","hasWon","setVictory","play","timer","changeStopTime","handleFieldClick","copyAIField","checkVictory","copyPlayerField","copyGuessField","copyMemo","victory","rerender","createThought","needRerender","Promise","resolve","reject","setTimeout","makeAIMove","promise","then","rest","finished","useEffect","newAIField","newPlayerField","alert","isWinner","competitor","action","Timer","time","update","interval","change","hours","setHours","minutes","setMinutes","seconds","setSeconds","setInterval","prev","clearInterval","padStart","modal","document","getElementById","window","onclick","event","target","style","display","EnterPage","logIn","userName","setName","onSubmit","e","preventDefault","fetch","method","headers","body","res","Error","statusText","catch","title","htmlFor","fontSize","type","placeholder","name","autoComplete","onChange","required","render","enter"],"mappings":"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","file":"static/js/main.c18189ab.chunk.js","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport { Game } from './../Routing';\r\n\r\nconst App = () => {\r\n    return (\r\n        <div id=\"App\">\r\n            <Game/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","export const config = {\r\n    fieldSize: 10,\r\n    ships: {\r\n        battleship: {\r\n            size: 4,\r\n            amount: 1,\r\n            units: [],\r\n            destroyed: []\r\n        },\r\n        cruiser: {\r\n            size: 3,\r\n            amount: 2,\r\n            units: [],\r\n            destroyed: []\r\n        },\r\n        destroyer: {\r\n            size: 2,\r\n            amount: 3,\r\n            units: [],\r\n            destroyed: []\r\n        },\r\n        boat: {\r\n            size: 1,\r\n            amount: 4,\r\n            units: [],\r\n            destroyed: []\r\n        }\r\n    },\r\n    safeValue: 5,\r\n    timeAIIsWaiting: 500,\r\n    timerStart: 30\r\n};","import React from 'react';\r\nimport './Field.css';\r\nimport {config} from \"../../Config\";\r\n\r\n/**\r\n * TODO подумать над оптимизацией\r\n * @param field\r\n * @param mode\r\n * @param playFor\r\n * @param handleClick\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Field = ({ field, mode, playFor, handleClick }) => {\r\n\r\n    const getClassAndId = (value) => {\r\n        let className = 'cell',\r\n            idName = 'empty';\r\n\r\n        if (parseInt(value) === (-1) * config.safeValue) {\r\n            idName = 'missed';\r\n        }\r\n        else if (parseInt(value) < 0) {\r\n            idName = 'killed';\r\n        }\r\n\r\n        if (mode === 'prepare') {\r\n            className += ' big_cell';\r\n        }\r\n        if (typeof value === 'string') {\r\n            className += ' safe';\r\n        } else {\r\n            if ((mode === 'play' && playFor === 'AI') ||\r\n                (mode === 'prepare' && playFor === 'player')) {\r\n\r\n                if (!value || Math.abs(value) === config.safeValue) {\r\n                    className += ' empty';\r\n                }\r\n            } else {\r\n                if (idName !== 'killed') {\r\n                    className += ' empty';\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            idName: idName,\r\n            className: className\r\n        };\r\n    };\r\n\r\n    return(\r\n        <div id=\"field\">\r\n            {\r\n                field.map((row, rowIndex) =>\r\n                    <div id=\"row\" key={rowIndex}>\r\n                        {\r\n                            row.map((cell, index) => {\r\n                                const { idName, className } = getClassAndId(cell);\r\n                                return (\r\n                                    <div className={className}\r\n                                         onClick={() => handleClick(rowIndex, index, playFor)}\r\n                                         key={index}>\r\n\r\n                                        <div id={idName}>\r\n                                            {idName === 'killed' && <img src=\"./img/fire.png\" alt=\"killed\"/>}\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Field;","import { config } from \"../Config\";\r\nimport { generateSafeArea, createListOfEmptyCells, Point } from \"./Routing\";\r\nimport _ from \"underscore\";\r\n\r\n/**\r\n * По созданным конфигам (directions) для каждого направления\r\n *  выбираем случайное и пытаемся посторить корабль\r\n *  если не выходит вычеркиваем его из списка доступных напрвлений\r\n * Как только все направления были перебраны и корабль не удалось построить\r\n *  выозвращаем coords с одной точкой - вершина начала корабля - сигнал неудачи для кораблей длиннее лодки\r\n * @param head\r\n * @param field\r\n * @param size\r\n * @returns {[*]}\r\n */\r\nconst locateShip = (head, field, size) => {\r\n    let coords = [head];            // список координат клеток корабля\r\n\r\n    const directions = [\r\n        { 'futureShip': head.y - size, 'offset': { 'y': -1, 'x': 0 } },     // вверх\r\n        { 'futureShip': head.x + size, 'offset': { 'y': 0, 'x': 1 } },      // вправо\r\n        { 'futureShip': head.y + size, 'offset': { 'y': 1, 'x': 0 } },      // вниз\r\n        { 'futureShip': head.x - size, 'offset': { 'y': 0, 'x': -1 } }      // влево\r\n    ];\r\n\r\n    const tryDirection = ({ futureShip, offset }) => {\r\n        if (0 <= futureShip && futureShip < config.fieldSize) {\r\n            let shipCells = [];\r\n            let iter = size;\r\n\r\n            while(iter) {\r\n                shipCells.push(field[head.y + iter * offset.y][head.x + iter * offset.x]);\r\n                iter--;\r\n            }\r\n\r\n            if (shipCells.every(cell => !cell)) {\r\n                shipCells.forEach((cell, index) =>\r\n                    coords.push(\r\n                        new Point(head.y + (index + 1) * offset.y,\r\n                            head.x + (index + 1) * offset.x)\r\n                    )\r\n                )\r\n            }\r\n        }\r\n    };\r\n\r\n    // нет смысла выбирать направление для корабля длиной в одну клетку\r\n    if (size) {\r\n        do {\r\n            const randomDirection = _.random(directions.length - 1);\r\n            tryDirection(directions[randomDirection]);\r\n            if (coords.length === 1) {\r\n                directions.splice(randomDirection, 1);\r\n            }\r\n\r\n        } while(coords.length === 1 && directions.length);\r\n    }\r\n    return coords;\r\n};\r\n\r\n/**\r\n * Генерируем корабль\r\n *  - получаем все клетки куда можно поставить корбаль (его первую вершину)\r\n *  - выбираем из доступных случайную клетку\r\n *  - для этой клетки выбираем из доступных направление для корабля\r\n *  - если для выбранной клетки ни в каком из направлений невозможно поставить\r\n *      корабль, то выбираем другую клетку (случайно)\r\n * @param field\r\n * @param size\r\n * @returns {{renderedField: *, coords: *}}\r\n */\r\nconst generateShip = (field, size) => {\r\n    const empty = createListOfEmptyCells(field);\r\n    let coords = [];\r\n\r\n    do {\r\n        // выбираем из списка пустых клеток случаную\r\n        const point = empty[_.random(empty.length - 1)];\r\n        // выбираем направление корабля и получаем его координаты (или коор-ту первой вершины)\r\n        // size - 1 - так как первая вершина уже выбрана\r\n        coords = locateShip(point, field, size - 1);\r\n    } while(coords.length !== size);\r\n\r\n    // ставим корабль на поле\r\n    coords.forEach(cell => field[cell.y][cell.x] = size);\r\n    // строим зону \"неприкосновенности\" вокруг корабля\r\n    generateSafeArea(field, coords);\r\n    return {\r\n        coords: coords,\r\n        renderedField: field\r\n    };\r\n};\r\n\r\nexport default generateShip;","import { config } from \"../Config\";\r\n\r\n/**\r\n * Грубо говоря пробегаемся по каждой клетке корабля и смотрим\r\n *  во все 8 условий (4 угла 4 стороны)\r\n * @param field\r\n * @param coords\r\n * @param toString\r\n */\r\nconst generateSafeArea = (field, coords, toString = false) => {\r\n    const safe = config.safeValue,\r\n        size = config.fieldSize,\r\n        sides = [-1, 0, 1];\r\n\r\n    coords.forEach(point => {\r\n        sides.forEach(rowOffset => {\r\n            const row = point.y + rowOffset;\r\n            sides.forEach(cellOffset => {\r\n                const cell = point.x + cellOffset;\r\n                if (0 <= row && row < size &&\r\n                    0 <= cell && cell < size &&\r\n                    (toString ? Math.abs(field[row][cell]) === config.safeValue || !field[row][cell] : !field[row][cell])) {\r\n\r\n                    field[row][cell] = toString ? String(field[row][cell]) : safe;\r\n                }\r\n            });\r\n        });\r\n    });\r\n};\r\n\r\nexport default generateSafeArea;","import _ from 'underscore';\r\nimport {config} from './../Config';\r\nimport {copy, createListOfEmptyCells} from \"./Routing\";\r\n\r\nconst AI = (field, destroyed, points) => {\r\n    const { startPoint, endPoint } = points.ship || {startPoint: null, endPoint: null};\r\n    const choice = { row: null, cell: null },\r\n        ship = {\r\n            startPoint: null,\r\n            endPoint: null\r\n        };\r\n\r\n    const searchStartPoint = () => {\r\n        let random = {},\r\n            value = 0;\r\n        const empty = createListOfEmptyCells(field);\r\n\r\n        do {\r\n            random = empty[_.random(empty.length - 1)];\r\n            value = +field[random.y][random.x];\r\n        } while (value < 0 || value === 5 || field[random.y][random.x] === \"0\");\r\n\r\n        return {\r\n            headRow: random.y,\r\n            headCell: random.x\r\n        }\r\n    };\r\n\r\n    const checkCanVisit = (row, cell) =>\r\n        0 <= row && row < config.fieldSize &&\r\n        0 <= cell && cell < config.fieldSize;\r\n\r\n    const getMovedEndPoint = (point, invert = false) => {\r\n        const diffRow = endPoint.row - startPoint.row,\r\n            diffCell = endPoint.cell - startPoint.cell,\r\n            index = invert ? (-1) : 1;\r\n        console.log(\"moving\", diffRow, diffCell);\r\n        return {\r\n            row: !diffRow ? point.row : point.row + index * (diffRow / Math.abs(diffRow)),\r\n            cell: !diffCell ? point.cell : point.cell + index * (diffCell / Math.abs(diffCell))\r\n        };\r\n    };\r\n\r\n    const searchEndPoint = () => {\r\n        const tail = {\r\n            tailRow: null,\r\n            tailCell: null\r\n        };\r\n\r\n        // if (missedShot) {\r\n        const directions = [\r\n            { offset: { row: -1, cell: 0 } },     // вверх\r\n            { offset: { row: 0, cell: 1 } },      // вправо\r\n            { offset: { row: 1, cell: 0 } },      // вниз\r\n            { offset: { row: 0, cell: -1 } }      // влево\r\n        ];\r\n        const availableDirs = directions.filter(dir =>\r\n            checkCanVisit(startPoint.row + dir.offset.row, startPoint.cell + dir.offset.cell) &&\r\n                    !field[startPoint.row + dir.offset.row][startPoint.cell + dir.offset.cell]);\r\n        // console.log(\"tail\", availableDirs);\r\n        if ((startPoint.row - endPoint.row) && (startPoint.cell - endPoint.cell)) {\r\n            const movedEndPoint = getMovedEndPoint(startPoint);\r\n            const tryIndex =\r\n                availableDirs.findIndex(dir =>\r\n                    dir.offset.row === movedEndPoint.row - startPoint.row &&\r\n                    dir.offset.cell === movedEndPoint.cell - startPoint.cell);\r\n            if (tryIndex !== -1) {\r\n                tail.tailRow = startPoint.row + availableDirs[tryIndex].offset.row;\r\n                tail.tailCell = startPoint.cell + availableDirs[tryIndex].offset.cell;\r\n            }\r\n        }\r\n\r\n        if (tail.tailCell === null) {\r\n            const tryDir = availableDirs[_.random(availableDirs.length - 1)].offset;\r\n            tail.tailRow = startPoint.row + tryDir.row;\r\n            tail.tailCell = startPoint.cell + tryDir.cell;\r\n            console.log(\"tryDir\", tryDir);\r\n        }\r\n            // const movedEndPoint = getMovedEndPoint(startPoint);\r\n            // const tryIndex =\r\n            //     availableDirs.findIndex(dir =>\r\n            //         dir.offset.row === movedEndPoint.row - startPoint.row &&\r\n            //         dir.offset.cell === movedEndPoint.cell - startPoint.cell);\r\n            // if (tryIndex !== -1) {\r\n            //     tail.tailRow = startPoint.row + availableDirs[tryIndex].offset.row;\r\n            //     tail.tailCell = startPoint.cell + availableDirs[tryIndex].offset.cell;\r\n            // } else {\r\n            //     const tryDir = availableDirs[_.random(availableDirs.length - 1)].offset;\r\n            //     tail.tailRow = startPoint.row + tryDir.row;\r\n            //     tail.tailCell = startPoint.cell + tryDir.cell;\r\n            //     console.log(\"tryDir\", tryDir);\r\n            // }\r\n            console.log(\"tail\", tail);\r\n        // }\r\n        // else {\r\n        //     const movedEndPoint = getMovedEndPoint(startPoint, true);\r\n        //     tail.tailRow = movedEndPoint.row;\r\n        //     tail.tailCell = movedEndPoint.cell;\r\n        // }\r\n\r\n        return tail;\r\n    };\r\n\r\n    if (!startPoint ||\r\n            field[startPoint.row][startPoint.cell] === (-1) * config.safeValue ||\r\n            destroyed) {\r\n        console.log(\"in first\", startPoint, endPoint, destroyed);\r\n        if (startPoint) console.log(\"first\", field[startPoint.row][startPoint.cell]);\r\n        const { headRow, headCell } = searchStartPoint();\r\n        choice.row = headRow;\r\n        choice.cell = headCell;\r\n        ship.startPoint = copy(choice);\r\n        ship.endPoint = copy(choice);\r\n        console.log(\"out first\", choice);\r\n    } else if (!endPoint ||\r\n            (startPoint.row === endPoint.row && startPoint.cell === endPoint.cell) ||\r\n            field[endPoint.row][endPoint.cell] === (-1) * config.safeValue) {\r\n        console.log(\"in second\", startPoint, endPoint);\r\n        const { tailRow, tailCell } = searchEndPoint();\r\n        choice.row = tailRow;\r\n        choice.cell = tailCell;\r\n        ship.startPoint = startPoint;\r\n        ship.endPoint = copy(choice);\r\n        console.log(\"out second\", ship, choice);\r\n    } else {\r\n        console.log(\"in third\", startPoint, endPoint);\r\n        const movedEndPoint = getMovedEndPoint(endPoint);\r\n        let tailRow = movedEndPoint.row,\r\n            tailCell = movedEndPoint.cell;\r\n        console.log(\"continue\", tailRow, tailCell);\r\n\r\n        if (!(checkCanVisit(tailRow, tailCell) && Math.abs(+field[tailRow][tailCell]) !== config.safeValue)) {\r\n            const newEndPoint = searchEndPoint();\r\n            tailRow = newEndPoint.tailRow;\r\n            tailCell = newEndPoint.tailCell;\r\n        }\r\n\r\n        choice.row = tailRow;\r\n        choice.cell = tailCell;\r\n        ship.startPoint = startPoint;\r\n        ship.endPoint = copy(choice);\r\n        console.log(\"out third\", ship, choice);\r\n    }\r\n\r\n    return {\r\n        rowAI: choice.row,\r\n        cellAI: choice.cell,\r\n        ship: ship\r\n    }\r\n};\r\n\r\nexport default AI;","import {config} from \"../Config\";\r\n\r\n/**\r\n * Двумерный массив (квадрат), заданного размера, заполненный нулями\r\n * @type {any[]}\r\n */\r\nconst initialField = (new Array(config.fieldSize)).fill(\r\n    (new Array(config.fieldSize)).fill(0)\r\n);\r\n\r\nexport default initialField;","const copy = object => {\r\n    let result = {};\r\n    if (object instanceof Array) {\r\n        result = object.map(arr => [...arr]);\r\n    } else if (object instanceof Object) {\r\n        result = JSON.parse(JSON.stringify(object));\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nexport default copy;","import {config} from \"../Config\";\r\n\r\nconst configureField = (field, row, cell) => {\r\n    const val = (-1) * (!+field[row][cell] ? config.safeValue : +field[row][cell]);\r\n    field[row][cell] = typeof field[row][cell] === 'string' ? String(val) : val;\r\n    return field[row][cell];\r\n};\r\n\r\nexport default configureField;","import { config } from \"../Config\";\r\nimport { Point } from \"./Routing\";\r\n\r\n/**\r\n * Отдает список разрешенных клеток (с координатами), те, что пустые\r\n * @param field\r\n * @returns {[]}\r\n */\r\nconst createListOfEmptyCells = (field) =>\r\n    field.flat().map((cell, index) => {\r\n        if (!cell) {\r\n            return new Point(Math.floor(index / config.fieldSize), index % config.fieldSize);\r\n        }\r\n    }).filter(cell => cell instanceof Point);\r\n\r\nexport default createListOfEmptyCells;","/**\r\n * Конкструктор объекта точки с координатами\r\n * @param row\r\n * @param cell\r\n * @constructor\r\n */\r\nfunction Point(row, cell) {\r\n    this.x = cell;\r\n    this.y = row;\r\n}\r\n\r\nexport default Point;","import React, {useEffect, useState} from 'react';\r\nimport _ from 'underscore';\r\nimport './Game.css';\r\nimport { Field, Timer } from './../Routing';\r\nimport { initialField, AI, generateShip,\r\n         copy, generateSafeArea, configureField } from \"../../utils/Routing\";\r\nimport {config} from \"../../Config\";\r\n\r\nconst setShips = (newField) =>\r\n    Object.fromEntries(\r\n        Object.entries(copy(config.ships))\r\n            .map(([ship, params]) => {\r\n                _.times(params.amount, () => {\r\n                    const { coords, renderedField } = generateShip(newField, params.size);\r\n\r\n                    params.units.push(coords);\r\n                    newField = renderedField;\r\n                });\r\n\r\n                params.destroyed = (new Array(params.amount)).fill(0);\r\n                return [ship, params];\r\n            })\r\n    );\r\n\r\nconst isWinner = (field) =>\r\n    !field.filter(row =>\r\n        !!row.filter(cell =>\r\n            +cell > 0 && +cell !== config.safeValue).length\r\n    ).length;\r\n\r\nconst checkShipDestroyed = (ships, row, cell) => {\r\n    let destroyedShip = null;\r\n    Object.entries(ships).forEach(([ship, params]) => {\r\n        const index = params.units.findIndex(unit =>\r\n            !!unit.filter(point =>\r\n                point.y === row && point.x === cell).length\r\n        );\r\n\r\n        if (index !== -1) {\r\n            if (++params.destroyed[index] === params.size) {\r\n                destroyedShip = params.units[index];\r\n                // TODO проверить для бота\r\n                // console.log(ship);\r\n            }\r\n        }\r\n    });\r\n    return destroyedShip;\r\n};\r\n\r\n/**\r\n * TODO подумать над оптимизацией\r\n * @returns {*}\r\n * @constructor\r\n */\r\nconst Game = () => {\r\n    const [mode, changeMode] = useState('prepare');\r\n    const [guessField, setGuess] = useState(copy(initialField));\r\n    const [AIField, setAIField] = useState(copy(initialField));\r\n    const [AIShips, setAIShips] = useState(copy(config.ships));\r\n    const [playerField, setPlayerField] = useState(copy(initialField));\r\n    const [playerShips, setPlayerShips] = useState(copy(config.ships));\r\n    // const [showResult, end] = useState(false);\r\n    const [AIMemory, memorize] = useState({});\r\n    const [AIIsThinking, think] = useState(false);\r\n    const [hasWon, setVictory] = useState({\r\n        status: false,\r\n        person: ''\r\n    });\r\n    const [play, timer] = useState(true);\r\n    const [stopTime, changeStopTime] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (mode === 'prepare') {\r\n            let newAIField = copy(initialField),\r\n                newPlayerField = copy(initialField);\r\n\r\n            setAIShips(setShips(newAIField));\r\n            setAIField(newAIField);\r\n\r\n            setPlayerShips(setShips(newPlayerField));\r\n            setPlayerField(newPlayerField);\r\n\r\n            setGuess(copy(initialField));\r\n            memorize({});\r\n        }\r\n    }, [mode]);\r\n\r\n    useEffect(() => {\r\n        if (hasWon.status) {\r\n            if (hasWon.person === 'person') {\r\n                alert('Поздравляем! Вы победили!');\r\n            } else {\r\n                alert('Это поражение...Увы :(');\r\n            }\r\n\r\n            changeMode('prepare');\r\n            timer(false);\r\n            setVictory({\r\n                status: false,\r\n                person: ''\r\n            })\r\n        }\r\n    }, [hasWon]);\r\n    \r\n    function handleFieldClick(row, cell, playFor)\r\n    {\r\n        if (mode === 'play' && playFor === 'player' && AIField[row][cell] >= 0 && !AIIsThinking && play) {\r\n            let copyAIField = copy(AIField);\r\n\r\n            configureField(copyAIField, row, cell);\r\n            if (+copyAIField[row][cell] !== (-1) * config.safeValue) {\r\n                const ship = checkShipDestroyed(AIShips, row, cell);\r\n                if (ship) {\r\n                    generateSafeArea(copyAIField, ship, true);\r\n                    checkVictory('person', copyAIField);\r\n                }\r\n                setAIField(copyAIField);\r\n            } else {\r\n                setAIField(copyAIField);\r\n                let copyPlayerField = copy(playerField);\r\n                let copyGuessField = copy(guessField);\r\n                let copyMemo = AIMemory;\r\n                let value = 0,\r\n                    destroyedShip = false,\r\n                    victory = false;\r\n\r\n                const rerender = () => {\r\n                    setGuess(copyGuessField);\r\n                    setPlayerField(copyPlayerField);\r\n                    memorize(copyMemo);\r\n                };\r\n\r\n                const createThought = (needRerender = false) =>\r\n                    new Promise((resolve, reject) => {\r\n                        if (+value !== (-1) * config.safeValue && !victory) {\r\n                            if (needRerender) rerender();\r\n                            think(true);\r\n                            setTimeout(() => {\r\n                                think(false);\r\n                                resolve(AI(copy(copyGuessField), destroyedShip, copyMemo));\r\n                            }, config.timeAIIsWaiting);\r\n                        } else {\r\n                            reject('finished');\r\n                        }\r\n                    });\r\n\r\n                const makeAIMove = promise => {\r\n                    promise.then(result => {\r\n                        const { rowAI, cellAI, ...rest } = result;\r\n                        destroyedShip = false;\r\n                        copyMemo = rest;\r\n                        copyGuessField[rowAI][cellAI] = value = configureField(copyPlayerField, rowAI, cellAI);\r\n                        const ship = checkShipDestroyed(playerShips, rowAI, cellAI);\r\n                        if (ship) {\r\n                            destroyedShip = true;\r\n                            generateSafeArea(copyPlayerField, ship, true);\r\n                            generateSafeArea(copyGuessField, ship, true);\r\n                            victory = checkVictory('AI', copyPlayerField);\r\n                        }\r\n                        // victory = isWinner(copyPlayerField);\r\n                        makeAIMove(createThought(true));\r\n                    }, finished => {\r\n                        rerender();\r\n                    });\r\n                };\r\n\r\n                makeAIMove(createThought());\r\n            }\r\n        }\r\n    }\r\n\r\n    const checkVictory = (person, field) => {\r\n        if (isWinner(field)) {\r\n            let competitor = 'person';\r\n            if (person === 'AI') {\r\n                competitor = 'AI';\r\n            }\r\n            setVictory({\r\n                status: true,\r\n                person: competitor\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    // const onTimerStop = () => {\r\n    //     if (mode === 'prepare') {\r\n    //         changeMode('play');\r\n    //     } else {\r\n    //         handleFieldClick(0, 0, 'player');\r\n    //     }\r\n    // };\r\n\r\n    const handlePlayRestart = () => {\r\n        if (mode === 'prepare') {\r\n            changeMode('play');\r\n            timer(true);\r\n        } else {\r\n            timer(false);\r\n            changeMode('prepare');\r\n        }\r\n    };\r\n\r\n    const handleStopTimer = (value) => changeStopTime(value);\r\n\r\n    return (\r\n        <div id=\"game\">\r\n            {\r\n                mode === 'play' &&\r\n                <Timer action={play} changeStopTime={handleStopTimer}/>\r\n            }\r\n            <div id=\"fields\">\r\n                <Field playFor={mode === 'prepare' ? 'player' : 'AI'}\r\n                       field={playerField}\r\n                       mode={mode}\r\n                       handleClick={handleFieldClick}/>\r\n                {\r\n                    mode === 'play' &&\r\n                    <Field playFor={'player'}\r\n                           field={AIField}\r\n                           mode={mode}\r\n                           handleClick={handleFieldClick}/>\r\n                }\r\n            </div>\r\n            <div className=\"button_group\">\r\n                <img src={`./img/${mode === 'prepare' ? 'power-button' : 'refresh'}.png`} alt=\"control\"\r\n                     onClick={() => handlePlayRestart()}/>\r\n\r\n                {\r\n                    mode === 'play' &&\r\n                    <img src={`./img/${play ? \"pause\" : \"play\"}.png`} alt=\"timer\"\r\n                         onClick={() => timer(play => !play)}/>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Game;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './Timer.css';\r\n\r\nconst Timer = ({ action, changeStopTime }) => {\r\n    const [time, update] = useState(0);\r\n    const [interval, change] = useState(null);\r\n    const [hours, setHours] = useState(null);\r\n    const [minutes, setMinutes] = useState(null);\r\n    const [seconds, setSeconds] = useState(null);\r\n\r\n    const start = () =>\r\n        change(setInterval(() => {\r\n            update(prev => prev + 1)\r\n        }, 1000));\r\n\r\n    const stop = () => clearInterval(interval);\r\n\r\n    useEffect(() => action ? start() : stop(), [action]);\r\n\r\n    useEffect(() => changeStopTime(time));\r\n\r\n    useEffect(() => {\r\n        let hours = 0, minutes = 0, seconds = 0;\r\n\r\n        hours = Math.floor(time / 3600);\r\n        minutes = Math.floor((time - hours * 3600) / 60);\r\n        seconds = time - (hours * 3600 + minutes * 60);\r\n\r\n        setHours(String(hours).padStart(2, \"0\"));\r\n        setMinutes(String(minutes).padStart(2, \"0\"));\r\n        setSeconds(String(seconds).padStart(2, \"0\"));\r\n    }, [time]);\r\n\r\n    return(\r\n        <div id='timer'>\r\n            {hours} : {minutes} : {seconds}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Timer;","import React, {useState} from 'react';\r\nimport './Enter.css';\r\n\r\n/* Модальное окно */\r\nconst modal = document.getElementById('id01');\r\nwindow.onclick = function(event) {\r\n    if (event.target === modal) {\r\n        modal.style.display = \"none\";\r\n    }\r\n};\r\n\r\nconst EnterPage = ({ logIn }) => {\r\n    const [userName, setName] = useState('');\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        fetch('/api/users',{\r\n            method:'post',\r\n            headers:{\r\n                'Content-Type':'application/json; charset=utf-8'\r\n            },\r\n            body: JSON.stringify(userName)\r\n        }).then(res => {\r\n            if(res.status===200) {\r\n                console.log('entered!', res);\r\n                logIn(userName);\r\n            }\r\n            throw new Error(res.statusText);\r\n        }).catch(e => alert(`Ошибка POST, ${e}`));\r\n\r\n        fetch('/api/users').then(res => {\r\n            if(res.status===200) console.log('success', res);\r\n            throw new Error(res.statusText);\r\n        }).catch(e => alert(`Ошибка GET, ${e}`));\r\n    };\r\n\r\n    return(\r\n        <div>\r\n            <button onClick={() => document.getElementById('id01').style.display='block'}\r\n                    className=\"ENT\">Играть &laquo;Морской Бой&raquo;</button>\r\n\r\n            <div id=\"id01\" className=\"modal\">\r\n                <form className=\"modal-content animate\" onSubmit={handleSubmit}>\r\n                    <div className=\"imgcontainer\">\r\n                        <span onClick={ () => document.getElementById('id01').style.display='none'}\r\n                              className=\"close\" title=\"Close Modal\">×</span>\r\n                        <img src=\"https://thumbs.gfycat.com/FrankFreeAmericankestrel-size_restricted.gif\"\r\n                             alt=\"Avatar\" className=\"avatar\" />\r\n                    </div>\r\n\r\n                    <div className=\"container\">\r\n                        <label htmlFor=\"uname\" style={{fontSize: \"2vh\"}}><b>Привет, я Smart, а ты...</b></label><br /><br />\r\n                        <input className='form-row' type=\"text\" placeholder=\"Введите имя\" name=\"uname\"\r\n                               autoComplete=\"off\" value={userName} onChange={e => setName(e.target.value)} required /><br /><br />\r\n                        <button type=\"submit\" className=\"button1\">ИГРАТЬ</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EnterPage;","import React, {useEffect, useState} from 'react';\r\nimport { render } from 'react-dom';\r\nimport './index.css';\r\nimport { App, EnterPage } from './components/Routing';\r\n\r\nconst Main = () => {\r\n    const [userName, enter] = useState('');\r\n\r\n    const logIn = (name) => {\r\n        enter(name);\r\n    };\r\n\r\n    return(\r\n        !!userName ? <App userName={userName}/> : <EnterPage logIn={logIn}/>\r\n    );\r\n};\r\n\r\nrender(\r\n    <Main />,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}